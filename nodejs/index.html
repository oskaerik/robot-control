<!DOCTYPE html>
<html>
  <head>
    <title>Robot Control</title>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
	  <script src="/socket.io/socket.io.js"></script>

    <script>
      // Socket for socket.io
      var socket = io();

      function initialize() {
        fillCanvas("#FF0000");
        var canvas = document.getElementById("canvas");
        canvas.addEventListener("touchstart", function() { changeState("yes"); });
        canvas.addEventListener("touchend", function() { changeState("no"); });
      }

      function changeState(touching) {
        // Change color of the canvas and send a message to the server
        if (touching == "yes") {
          fillCanvas("#00FF00");
          socket.emit('touching', 'yes');
        } else {
          fillCanvas("#FF0000");
          socket.emit('touching', 'no');
        }

      }

      function fillCanvas(color) {
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        ctx.fillStyle = color;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
      }
    </script>

  <body onLoad="initialize()">
    <canvas width="100" height="100" id="canvas" style="border:solid"></canvas>
  </body>
</html>
